{% extends "layout.html" %}
{% block body %}
    <div class="page-header">
            <h1>Test and Send Emails</h1>
    </div>
    {% if user %}
    <div class="form-group">
        <form action="/sendemail" id="usrform" method="post">
            Send Address:
            <input type="email" name="send_address" required class="form-control">
            Subject:
            <input type="text" name="email_subject" required class="form-control">
            Body:
            <textarea rows="4" cols="50" name="email_body" form="usrform" required class="form-control">
                Enter text here...
            </textarea>
            <input type="submit" class="btn">
        </form><br/>
    </div>
   {% else %}
    <h1> You must be logged in to view this page.</h1>
    {% endif %}
{% endblock %}
{% block footer %}
    <script src="https://cloud.tinymce.com/stable/tinymce.min.js?apiKey=oi1h5eercka6ep3282vhbmznnqdjusxha5gziqz2weuwxvah"></script>
      <script>
        tinymce.init({
            selector: 'textarea',
            height: 300,
            menubar: false,
            plugins: [
                'advlist autolink lists link textcolor',
                'searchreplace visualblocks',
                'insertdatetime paste'
            ],
            toolbar: 'mybutton | insert | undo redo | bold italic | alignleft aligncenter alignright | removeformat',
            setup: function (editor) {
                editor.addButton('mybutton', {
                    type: 'listbox',
                    text: 'Personalization',
                    icon: false,
                    onselect: function (e) {
                        editor.insertContent(this.value());
                    },
                    values: [
                        { text: 'First Name', value: '${first_name}' },
                        { text: 'Last Name', value: '${last_name}' },
                        { text: 'Email', value: '${email}' }
                    ]
                });
            }
        });
    </script>
{% endblock %}